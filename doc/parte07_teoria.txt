üìò Parte 07 ‚Äì Navegaci√≥n de P√°ginas con Cursores

üß† Conceptos Introducidos

1. Cursor
Un cursor es una estructura que representa una posici√≥n dentro de una tabla. Sirve para recorrer fila por fila una tabla, ayudando a abstraer la navegaci√≥n de p√°ginas y filas en memoria.

Se define con:
- Table* table: tabla sobre la que opera.
- uint32_t row_num: n√∫mero de fila actual.
- bool end_of_table: indica si se ha llegado al final de la tabla.

2. Navegaci√≥n por Cursores
Se crean funciones para obtener un cursor al inicio (table_start) y uno al final (table_end) de la tabla. Luego se avanza con cursor_advance.

Esto permite que las operaciones SELECT e INSERT no accedan directamente a table->pager, sino que usen cursores, lo cual prepara la arquitectura para √°rboles B+ m√°s adelante.

‚öôÔ∏è Cambios en el C√≥digo

- Se introduce cursor.[c|h].
- Se extrae la l√≥gica de acceso a filas (row_slot) y se transforma en cursor_value(cursor).
- Se reemplaza table->pager en funciones execute_insert y execute_select por el uso de cursores.
- Se mantiene la estructura de paginaci√≥n, pero ahora el cursor encapsula la navegaci√≥n.

üîÑ Motivo del Cambio

Hasta ahora, el acceso a los datos era directo: cada fila se localizaba mediante row_num. Esto funciona en una base de datos simple, pero no es flexible para estructuras m√°s complejas.

Con Cursor, ahora:
- Se puede abstraer la navegaci√≥n entre filas y p√°ginas.
- Se facilita el cambio a estructuras como √°rboles B+.
- Se encapsula mejor el acceso, lo que simplifica futuras extensiones.